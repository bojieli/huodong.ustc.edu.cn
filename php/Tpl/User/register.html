<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>注册</title>
<link href="/static/css1.css" rel="stylesheet" type="text/css" />
<link href="/static/zhuce.css" rel="stylesheet" type="text/css" />
<script src="/static/jquery-1.7.1.js" type="text/javascript"></script>
</head>

<body>
<div id="header">
  <div class="head-1160">
      <div class="logo"><a href="/">大学海报</a></div><div id="zc1biaoyu"><a href="">大学社团原来可以这么简单</a></div>
  </div><!--head-990-->
</div><!--header-->

<div id="zc1mainding">
	<div class="zc1contentrect">
    	<div class="zc1content">
		 <form id="registerform" name="registerform" action="/User/addUser" method="post">
			<table cellspacing="0" cellpadding="0" border="0" class="zc1table">
                <tr>
                	<td align="right" valign="middle" width="150px" height="50px"><em>*</em>学校</td>
                    <td class="zc1tablerect" width="300px" height="50px" valign="middle" align="left">
                    	<div class="zc1school">
                        	<!--
                        	<strong>
                            	<input type="text" autocomplete="off" name="" width=230px />
                            </strong>
                            -->
                            中国科学技术大学
                        </div>                        
                    </td>
                </tr>
                <tr>
                	<td align="right" valign="middle" width="150px" height="50px"><em>*</em>性别</td>
                    <td class="zc1tablerect" width="300px" height="50px" valign="middle" align="left">
                    	<div class="zc1school">
                        	<input type="radio" name="gender" checked value="1" />男
							<input type="radio" name="gender"value="0" />女


                        </div>                        
                    </td>
                </tr>
                <tr>
                	<td align="right" valign="middle" width="150px" height="50px"><em>*</em>学院</td>
                    <td class="zc1tablerect" width="300px" valign="middle" align="left">
                    	<div class="zc1fakesel">
                        	<strong>
							<select name="dept" id="dept">
							  <option value ="0">请选择学院</option>
							  <option value ="少年班学院">少年班学院</option>
							  <option value ="数学科学学院">数学科学学院</option>
							  <option value="物理学院">物理学院</option>
							  <option value="化学与材料科学学院">化学与材料科学学院</option>
							  <option value="生命科学学院">生命科学学院</option>
							  <option value="工程科学学院">工程科学学院</option>
							  <option value="信息科学技术学院">信息科学技术学院</option>
							  <option value="计算机科学与技术学院">计算机科学与技术学院</option>
							  <option value="地球和空间科学学院">地球和空间科学学院</option>
							  <option value="管理学院">管理学院</option>
							  <option value="公共事务学院">公共事务学院</option>
							  <option value="人文与社会科学学院">人文与社会科学学院</option>
							  <option value="核科学技术学院">核科学技术学院</option>
							  <option value="软件学院">软件学院</option>
							  <option value="继续教育学院">继续教育学院</option>
							  <option value="网络教育学院">网络教育学院</option>
							  <option value="苏州研究院">苏州研究院</option>
							  <option value="上海研究院">上海研究院</option>
							  <option value="国家同步辐射实验室">国家同步辐射实验室</option>
							  <option value="合肥微尺度物质科学国家实验室（筹）">合肥微尺度物质科学国家实验室（筹）</option>
							  <option value="火灾科学国家重点实验室">火灾科学国家重点实验室</option>
							</select>
                            </strong>
							<br>
							<span id="checkDept"></span>
                        </div>
                    </td>
                </tr>
                <tr>
                	<td align="right" valign="middle" width="150px" height="50px"><em>*</em>学号</td>
                    <td class="zc1tablerect" width="300px" height="50px" valign="middle" align="left">
                    	<div class="zc1school">
                        	<input type="text" name="student_no" id="student_no" size='20' /><span id="checkStudent_no"></span>
                        </div>                        
                    </td>
                </tr>
				<tr>
                	<td align="right" valign="middle" width="150px" height="50px"><em>*</em>真实姓名</td>
                    <td class="zc1tablerect" width="300px" height="50px" valign="middle" align="left">
                    	<div class="zc1school">
                        	<input type="text" name="realname" id="realname" size='20' /><span id="checkRealname"></span>
                        </div>                        
                    </td>
                </tr>
                <tr>
                	<td align="right" valign="middle" width="150px" height="50px"><em></em>电话</td>
                    <td class="zc1tablerect" width="300px" height="50px" valign="middle" align="left">
                    	<div class="zc1school">
                        	<input type="text" id = "telephone" name="telephone" size='20' /><span id="checkTelephone"></span>
                        </div>                        
                    </td>
                </tr>
                <tr>
                	<td align="right" valign="middle" width="150px" height="50px"><em>*</em>注册邮箱</td>
                    <td class="zc1tablerect" width="300px" height="50px" valign="middle" align="left">
                    	<div class="zc1school">
                        	<input type="text" id="email" name="email" size='10' />@mail.ustc.edu.cn <br><span id="checkMail"></span>
                        </div>                        
                    </td>
                </tr>
				<tr>
                	<td align="right" valign="middle" width="150px" height="50px"><em>*</em>密码</td>
                    <td class="zc1tablerect" width="300px" height="50px" valign="middle" align="left">
                    	<div class="zc1school">
                        	<input type="password" id="password" name="password" size='20' /><span id="checkPassword"></span>
                        </div>                        
                    </td>
                </tr>
				<tr>
                	<td align="right" valign="middle" width="150px" height="50px"><em>*</em>再次输入密码</td>
                    <td class="zc1tablerect" width="300px" height="50px" valign="middle" align="left">
                    	<div class="zc1school">
                        	<input type="password" id="password2" name="password2" size='20' /><span id="checkPassword2"></span>
                        </div>                        
                    </td>
                </tr>
                <tr>
                	<td align="right" valign="middle" width="150px" height="50px"><em>*</em>验证码</td>
                    <td class="zc1tablerect" width="300px" height="50px" valign="middle" align="left">
					<img id="ajaxCheckImg" src="index.php?m=User&a=ajaxVerify" />
                    	<div class="zc1school">
                        	<input id="check" type="text" name="check" /><span id="checkCode"></span>
                        </div>                        
                    </td>
                </tr>
                <tr>
                	<td align="right" valign="middle" width="150px" height="50px"><a href="#" onclick="submituser();return false;">提交申请</a></td>
                    <td class="zc1tablerect" width="300px" height="50px" valign="middle" align="left">
                    	&nbsp;                      
                    </td>
                </tr>
            </table>
			</form>
            <div class="zc1note">
            之后等待邮件通知，通过邮箱链接，便可以接着操作；申请有效期为<b>1个月</b>，1个月未被处理，则申请会自动失效。
            </div>
		</div>
	</div>
</div>
<script>
$(function(){

	$('#dept').blur(function(){												
		if($.trim($(this).val())=="0"){
			$("#checkDept").html('<font color="#FF0000"  size="1">请选择学院</font>');
		}
		else {
			$("#checkDept").html('<img src="/static/check_right.gif">');
		}
	});

	$('#student_no').blur(function(){												
		if($.trim($(this).val())==""){
			$("#checkStudent_no").html('<font color="#FF0000"  size="1">请填写学号</font>');
		}
		else {
			$("#checkStudent_no").html('<img src="/static/check_right.gif">');
		}
	});

	$('#realname').blur(function(){												
		if($.trim($(this).val())==""){
			$("#checkRealname").html('<font color="#FF0000"  size="1">请填写真实姓名</font>');
		}
		else {
			$("#checkRealname").html('<img src="/static/check_right.gif">');
		}
	});

	$('#email').blur(function(){												
		if($.trim($(this).val())==""){
			$("#checkMail").html('<font color="#FF0000"  size="1">邮箱不能为空</font>');
		}
		else {
			$.post("index.php?m=User&a=ajaxCheckEmail",{email: $(this).val()},
				function(data){
					if(data.status==1)
					{
						$("#checkMail").html('<img src="/static/check_right.gif">');
						
					}
					else
					{
						$("#checkMail").html('<font color="#FF0000"  size="1">'+data.info+'</font>');
					}
			},"json");
			
		}
	});	
	$('#password').blur(function(){												
		if($(this).val()==""){
			$("#checkPassword").html('<font color="#FF0000"  size="1">密码不能为空！</font>');
			}
		else {
			$("#checkPassword").html('<img src="/static/check_right.gif">');
			}
	});	
	$('#password2').blur(function(){													
		if($(this).val()!=$('#password').val()){
			$("#checkPassword2").html('<font color="#FF0000"  size="1">密码前后不一致！</font>');
		}
		
		else{
			$("#checkPassword2").html('<img src="/static/check_right.gif">');
		}
	});	
	$('#check').blur(function(){
		$.post("/User/ajaxCheckCode",{check: $(this).val()},
				function(data){
					if(data.status==1)
					{
						$("#checkCode").html('<img src="/static/check_right.gif">');
						
					}
					else
					{
						
						$("#ajaxCheckImg").attr("src","index.php?m=User&a=ajaxVerify");
						$("#checkCode").html('<font color="#FF0000"  size="1">验证码错误</font>');
					}
		},"json");
	});	
});

function submituser(){
	if($.trim($('#dept').val())==0)
	{
		$("#checkDept").html('<font color="#FF0000"  size="1">请选择学院</font>');
		return false;
	}
	if($.trim($('#student_no').val())=="")
	{
		$("#checkStudent_no").html('<font color="#FF0000"  size="1">请填写学号</font>');
		return false;
	}
	if($.trim($('#realname').val())=="")
	{
		$("#checkRealname").html('<font color="#FF0000"  size="1">请填写真实姓名</font>');
		return false;
	}
	if($.trim($('#email').val())=="")
	{
		$("#checkMail").html('<font color="#FF0000"  size="1">邮箱不能为空</font>');
		return false;
	}
	if($('#password').val()=="")
	{
		$("#checkPassword").html('<font color="#FF0000"  size="1">密码不能为空！</font>');
		return false;
	}
	if($('#password2').val()!=$('#password').val()){
		$("#checkPassword2").html('<font color="#FF0000"  size="1">密码前后不一致！</font>');
		return false;
	}
	$.post("index.php?m=User&a=ajaxCheckCode",{check: $("#check").val()},
				function(data){
					if(data.status!=1)
					{	
						$("#ajaxCheckImg").attr("src","index.php?m=User&a=ajaxVerify");
						$("#checkCode").html('<font color="#FF0000"  size="1">验证码错误</font>');
						return false;
					}
					else
					{	
						
						$.post("index.php?m=User&a=ajaxCheckEmail",{email: $("#email").val()},
							function(data){
								if(data.status==1)
								{
									$("#checkMail").html('<img src="/static/check_right.gif">');
									$('#registerform').get(0).submit();
												
								}
								else
								{
									$("#checkMail").html('<font color="#FF0000"  size="1">'+data.info+'</font>');
									return false;
								}
						},"json");
						
					}
		},"json");

	
	
	
}
</script>

</body>
</html>
